#!/usr/bin/env ruby

require 'optparse'
require 'methadone'
require 'branch_sweeper.rb'

class App
  include Methadone::Main
  include Methadone::CLILogging

  main do |repository|
    BranchSweeper::Clean.new(repository).run!
  end

  description 'Report branches that have not been active for the past year'

  arg :repository, 'Repository to scan for inactive branches'

  version BranchSweeper::VERSION

  use_log_level_option toggle_debug_on_signal: 'USR1'

  go!
end
